version: 1

# Define the task family and revision number
# This should be unique for each task definition
# For example: my-flask-app:v1, my-flask-app:v2, etc.
family: upload-ms
revision: 1

# Define the container(s) to run in this task
containerDefinitions:
  - name: upload-ms
    image: upload-ms:latest
    portMappings:
      - containerPort: 8080
    environment:
      - name: FLASK_ENV
        value: production
      - name: FLASK_APP
        value: wsgi.py
      - name: MY_ENV_VARIABLES
        valueFrom: 
          s3Arn: arn:aws:s3:::itsa-t3-ecs-environment-files/upload-ms/.env

# Define the task CPU and memory requirements
# Adjust these as needed for your specific application
cpu: 2048
memory: 3072

# Define the task execution role ARN
# Replace with the appropriate ARN for your execution role
executionRoleArn: arn:aws:iam::148484133023:role/ecsTaskExecutionRole

# Define the task network mode
# This should match the network mode of your service
networkMode: awsvpc

# Define the task IAM task role ARN
# Replace with the appropriate ARN for your task role
taskRoleArn: arn:aws:iam::148484133023:role/ecsTaskExecutionRole

# Define the logging configuration
# This example uses CloudWatch Logs
# Replace with the appropriate values for your logging setup
logConfiguration:
  logDriver: awslogs
  options:
    awslogs-group: /ecs/my-flask-app
    awslogs-region: ap-southeast-1
    awslogs-stream-prefix: ecs